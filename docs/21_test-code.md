# Test Code

- 테스트 코드는 리팩토링 할 때 가장 중요해진다.
  - 서비스를 대규모로 개편할 경우 기존의 모든 기능이 동작해야 한다. script 실행 명령어를 통해 테스트 코드를 실행시키면 간단히 확인할 수 있다.

## 테스트 코드 작성 방법

- `describe` 안에 `it`/`test` 를 사용하여 하나의 로직을 테스트
- 각 테스트 케이스는 `expect` 를 사용해서 검증
  - 실제 컴포넌트에서 성공 / 실패한 경우 적절한 결과가 나타나는가?
- 테스트 코드 리뷰

## 테스트 코드 작성 시 주의사항

- 테스트를 위한 테스트를 하지 않는다.
  - 테스트 코드는 있으면 좋지만 필수는 아니다.
  - 모든 기능이 아닌 중요한 기능을 작성한다.
    - 프로젝트 기획이 변경될 경우 유연하게 대응할 수 있어야 한다.
- 테스트 케이스의 검증부(`expect`)는 하드코딩 한다.
  - production 코드의 도메인 로직과 결합되지 않도록 한다.
- 테스트 케이스 1개당 하나의 로직만 테스트한다.

## 테스트 대상과 테스트 시나리오

- 비즈니스 로직을 테스트한다.
- 요구사항의 “사용자 시나리오", 즉 "기능"에 집중해야 한다.
  - 아이디 비밀번호를 입력했을 때 버튼 활성화 여부
    1. 버튼이 화면에 표시되는가?
    2. 버튼이 요구 조건에 맞게 활성화 되는가?
    3. 활성화된 버튼을 클릭하면 이벤트가 적절히 발생하는가?
  - 입력 데이터에 따른 로그인 성공 및 실패 여부와 그에 따른 동작(중요)
    - 올바른 계정 정보로 로그인이 성공하는가?
    - 잘못된 계정 정보로 로그인이 실패하는가?
      - 로그인 실패 여부를 에러 메시지로 확인 가능한가?
- 프론트엔드는 단위테스트와 통합테스트의 경계가 모호하다.
  1. input, button 등 요소가 화면에 표시되는가?
  2. 각 요소의 EventHandler 가 잘 동작하는가?
  3. HTTP request 가 잘 이루어지는가?
- 단, 비즈니스 로직과 관련없는 UI 테스트는 진행하지 않는다.
  - 레이아웃(style): 기기의 크기에 따라 달라진다.
  - 컴포넌트 렌더링 순서: JSX 는 선언한 대로 렌더링 되며, 요소가 특정 요소 위에 존재하는지의 여부는 중요치 않다.

## 테스트 방법

- Given - When - Then: 주어진 상황에서, 어느 시점에, 의도한 대로 동작하는가
- True 또는 False 를 리턴
- 결과값을 expection 과 비교

## 테스트 종류

### 단위테스트(유닛테스트)

- 코드의 가장 작은 단위를 테스트
  - 각각의 컴포넌트, 함수
  - Jest 가 보편적으로 사용됨
- e.g. 로그인 기능
  1. 아이디와 비밀번호 입력 필드가 존재하는가?
  2. 아이디와 비밀번호 입력 필드가 적절한 속성(type, name 등)을 가지고 있는가?
  3. 로그인 버튼이 존재하고, 활성 상태인가?
  4. 아이디 또는 비밀번호가 없을 때 로그인 버튼을 클릭하면 에러 메시지가 표시되는가?
  5. 로그인 관련 EventHanlder 함수가 예상대로 동작하는가?

### 통합테스트

- 여러 컴포넌트나 모듈이 함께 작동하는 경우를 테스트
  - 컴포넌트간 상호작용을 보는 것
  - 단위테스트보다 넓은 범위
- e.g. 로그인 기능
  1. 아이디와 비밀번호를 입력하고 로그인 버튼을 클릭했을 때, 올바른 요청이 서버로 전송되는가?
  2. 서버에서 응답이 오면 적절하게 UI가 업데이트 되는가?
  3. 로그인 성공 후 사용자를 적절한 페이지로 리디렉션 되는가?

### E2E 테스트

- 사용자 관점에서 어플리케이션 플로우를 전체적으로 테스트
- 실제 환경에서 테스트
  - 모든 컴포넌트
  - 데이터베이스
  - 네트워크
  - 사용자 인터페이스
- 빠른 대응/수정이 불가능하여 애자일에 부적합
- e.g. 로그인 기능
  - 실제 환경과 유사한 상황에서 사용자가 웹사이트를 방문하여 아이디와 비밀번호를 입력하고, 로그인 버튼을 클릭하는 과정을 시뮬레이션

## 프론트엔드 TDD

- 프론트엔드에서 완벽한 TDD는 불가능하다.
- Component UI를 먼저 작성할 경우, 비즈니스 로직에 대한 테스트를 먼저 작성 후 비즈니스 로직을 작성하는 방법이 있으나 완벽한 TDD 라고 볼 수 없다.
